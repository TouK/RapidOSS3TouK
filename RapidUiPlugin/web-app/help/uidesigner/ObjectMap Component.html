>
ObjectMap is a UI component to display objects in map view.</p>

<p><img src="download/attachments/2201784/objectmap.jpg" align="absmiddle" border="0"/></p>

<h4><a name="ObjectMapComponent-AvailableProperties"></a>Available Properties</h4>

<p><b>name</b> (Required): Name of the component. Default is ObjectMap.<br/>
<b>title</b> (Optional): ObjectMap component title<br/>
<b>expandUrl</b> (Required): The default URL to be used for requests to the server to retrieve map topology (nodes, edges, locations, and etc.). ex: script/run/expandMap<br/>
<b>dataUrl</b> (Required): The default URL to be used for requests to the server to retrieve the data of each node and edges (state, cpu utilization, and etc.). ex: script/run/getMapData</p>

<p><b>nodePropertyList(Required) :</b> Comma seperated list of properties that will identify a node, will be sent in params to the scripts, specified node properties will be sent to the script. ex: name,rsClassName</p>

<p><b>mapPropertyList(Required) :</b> Comma seperated list of properties that will identify the map, will be sent in params to the scripts, specified map properties will be sent to the script. ex: mapType<br/>
<b>pollingInterval</b> (Optional): Time delay between two server requests. Default is 0 which means there is no polling.</p>

<h4><a name="ObjectMapComponent-AdditionalProperties"></a>Additional Properties</h4>

<p><b>nodeSize</b> (Optional): Height of the node (width is 1.5 times height). Default is 60.<br/>
<b>edgeColorDataKey</b> (Optional however it has to be used together with edgeColors property.): ex: "state" in the edge tag in the sample response to dataUrl call above<br/>
<b>edgeColors</b> (Optional): The edge color mapping depending on the possible values of "edgeColorDataKey". Default is 0. ex: 5:0xffde2c26,4:0xfff79229,3:0xfffae500,2:0xff20b4e0,1:0xffac6bac,0:0xff62b446,default:0xff62b446<br/>
<b>timeout</b> (Optional): The time interval in seconds to wait the server request completes successfully before aborting.</p>

<h4><a name="ObjectMapComponent-AvailableActions"></a>Available Actions</h4>

<p><b>Clone</b>: Creates a copy of the component with the same properties<br/>
<b>Delete</b>: Deletes the component</p>

<h4><a name="ObjectMapComponent-AvailableEvents"></a>Available Events</h4>
<p><b>onNodeClick</b>: Event fired when an object node is clicked. Available parameters:</p>
<ul>
	<li>params.data: JavaScript object representing node data.</li>
</ul>


<h4><a name="ObjectMapComponent-CommunicationofObjectMapandscripts%3A"></a>Communication of ObjectMap and scripts :</h4>
<p><b>Sample Map :</b> Root node is RsTopologyObject sampleNode , leaf nodes are RsEvent objects named, ev1, ev2 , ev3</p>

<p>Map can be generated by running script generateSampleMap.</p>

<p><br clear="all" />  <img src="download/attachments/2201784/sampleMap.png" align="absmiddle" border="0"/><br clear="all" /></p>

<p>1. User requests url : <a href="http://localhost:12222/RapidSuite/index/maps.gsp?name=sampleNode&amp;rsClassName=RsTopologyObject&amp;mapType=sampleMap">http://localhost:12222/RapidSuite/index/maps.gsp?name=sampleNode&amp;rsClassName=RsTopologyObject&amp;mapType=sampleMap</a><br/>
2. maps.gsp calls the loadMapForNode method of the ObjectMap.&nbsp; nodeParams : getURLParams() , mapParams: getURLParams() .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; getURLParams()&nbsp; is a javascript function returns a map of all the params in the request URL , defined under RS_HOME/RapidSuite/web-app/pageContents/_maps.gsp .</p>

<p>3. loadMapForNode calls expandMap script to expand sampleNode with the following parameters.<br/>
mapProperties and nodes parameters are generated by ObjectMap component by using user specified nodePropertList and mapPropertyList. ObjectMap component also uses additional internal&nbsp; properties for nodes ( id, expanded,x,y )</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">expandedNodeName:sampleNode
mapProperties:sampleMap
mapPropertyList:mapType
nodePropertyList: id,name,rsClassName,expanded,x,y
nodes:	,sampleNode,RsTopologyObject,<span class="code-keyword">true</span>,250,250</pre>
</div></div>
<p>4.Response from the expandMap script:&nbsp; returns nodes and edges , for each node user specified properties  ( name , rsClassName )&nbsp; and internal properties  ( id , x, y , expanded, expandable )&nbsp; are supplied.</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;graph&gt;
  &lt;node expanded='<span class="code-keyword">true</span>' expandable='<span class="code-keyword">true</span>' x='250' y='250' id='sampleNode' rsClassName='RsTopologyObject'
 name='sampleNode' /&gt;
  &lt;node expanded='<span class="code-keyword">false</span>' expandable='<span class="code-keyword">true</span>' x='' y='' id='ev0' rsClassName='RsEvent' name='ev0' /&gt;
  &lt;node expanded='<span class="code-keyword">false</span>' expandable='<span class="code-keyword">true</span>' x='' y='' id='ev1' rsClassName='RsEvent' name='ev1' /&gt;
  &lt;node expanded='<span class="code-keyword">false</span>' expandable='<span class="code-keyword">true</span>' x='' y='' id='ev2' rsClassName='RsEvent' name='ev2' /&gt;
  &lt;edge source='sampleNode' target='ev0' /&gt;
  &lt;edge source='sampleNode' target='ev1' /&gt;
  &lt;edge source='sampleNode' target='ev2' /&gt;
&lt;/graph&gt;</pre>
</div></div>
<p>5. after processing node and edge information , ObjectMap calls getMapData script to get additional data of the nodes and edges :</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">edges: ev0,sampleNode;ev1,sampleNode;ev2,sampleNode
mapProperties: sampleMap
mapPropertyList: mapType
nodePropertyList: id,name,rsClassName
nodes: sampleNode,sampleNode,RsTopologyObject;ev0,ev0,RsEvent;ev1,ev1,RsEvent;ev2,ev2,RsEvent</pre>
</div></div>
<p>6. getMapData : for each node supplies the user specified properties ( name , rsClassName )&nbsp; , internal properties (id) and data properties ( gauged, displayName ) . for edges required properties ( source, target ) and data properties (state) .</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">&lt;graphData&gt;
  &lt;node gauged='<span class="code-keyword">true</span>' id='sampleNode' name='sampleNode' rsClassName='RsTopologyObject' state='0' displayName
='sampleNode' /&gt;
  &lt;node gauged='<span class="code-keyword">true</span>' id='ev0' name='ev0' rsClassName='RsEvent' state='0' displayName='ev0' /&gt;
  &lt;node gauged='<span class="code-keyword">true</span>' id='ev1' name='ev1' rsClassName='RsEvent' state='0' displayName='ev1' /&gt;
  &lt;node gauged='<span class="code-keyword">true</span>' id='ev2' name='ev2' rsClassName='RsEvent' state='0' displayName='ev2' /&gt;
  &lt;edge source='ev0' target='sampleNode' state='0' /&gt;
  &lt;edge source='ev1' target='sampleNode' state='0' /&gt;
  &lt;edge source='ev2' target='sampleNode' state='0' /&gt;
&lt;/graphData&gt;</pre>
</div></div>

<h4><a name="ObjectMapComponent-GenericStructureofObjectMap%3A"></a>Generic Structure of ObjectMap:</h4>

<p>In the expandMap result : ObjectMap needs properties id,expanded,expandable,x,y for the nodes. source, target node ids for the edges.</p>

<p>In the getMapData result : ObjectMap needs properties id for the nodes, source, target node ids for the edges.</p>

<p>All the other properties may be changed due to user requirements.</p>

<p>ObjectMap is able to send map and node properties by processing user specified mapPropertyList and nodePropertyList. The scripts are also able to process user specified list parameters and are able to return the needed properties.</p>

<p>In current implementation name property is a must for nodes , rsClassName is optional ( when nodes are from different models )&nbsp; . So nodePropertyList is name , rsClassName</p>

<p>In current implementation we may have different map configurations and multiple topology maps at the same time&nbsp; . So mapPropertyList is mapType</p>

<p>According&nbsp; to the needs for a custom implementation , nodePropertyList and mapPropertyList may change.&nbsp;<br clear="all" /></p>

<p>Sample Scenario 1: We would like to add some virtual nodes which will be generated by the script which doesnt exist in model. We define a virtual property which will be true / false . Scripts will be aware of these property and the virtual nodes , ObjectMap is able to communicate with the scripts without knowing the details.</p>


<p>nodePropertyList: name,rsClassName,virtual</p>

<p>Sample Scenario 2: The scripts can act differently depending upon mapType configuration . Suppose that for the same mapType we would like to turn on&nbsp; link state information on and off.&nbsp; By specifying additional showEdgeState getMapData will be able to show states or not .</p>

<p>mapPropertyList : mapType,showEdgeState</p>

<p><b>&#42; Scripts used for saving&nbsp; &amp; loading&nbsp; maps&nbsp; , saveMap &amp; getMap are also able to save user specified properties for nodes and map.</b></p>

<p>ObjectMap acts as a bridge between the scripts and user interface, it does not interfere with the internals of the scripts. Any custom property list may be used. expandMap and getMapData scripts should be changed accordingly.</p>


